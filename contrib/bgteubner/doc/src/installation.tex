%
% bgteubner class bundle
%
% installation.tex
% Copyright 2003--2012 Harald Harders
%
% This program may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your opinion) any later version.
% The latest version of this license is in
%    http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 1999/12/01 or later.
%
% This program consists of all files listed in manifest.txt.
% ===================================================================
\chapter{Installation von \LaTeX\ und der Pakete}%
\label{chap:installation}%


\section{Installation von \LaTeX}%

Der Teubner Verlag nimmt Ihr Manuskript im \acro{PDF}"=Format
entgegen.
Da \pdfLaTeX\ die Methode darstellt, mit der aus
\LaTeX\ die saubersten \acro{PDF}"=Dateien erzeugt werden können,
muss dieses Programm verwendet werden.
Gerade \pdfLaTeX\ ist in der letzten Zeit stark weiterentwickelt
worden, so dass eine möglichst moderne Version verwendet werden soll.
Außerdem benötigt die \verb|bgteubner|"=Klasse einige Zusatzpakete in
relativ neuen Versionen.
Daher ist es häufig zweckmäßig, eine aktuelle \TeX"=Distribution zu
verwenden.

Mit \TeXLive\,8 steht eine Distribution zur Verfügung, die sowohl für
Windows, Linux, viele Unix"=Derivate als auch Macintosh\footnote{Da es
  sich bei Mac\,\acro{OS\,X} um einen Unix"=Dialekt
  handelt, wird es im Weiteren nicht gesondert betrachtet. 
  Auf Unterschiede zu anderen Unixvarianten wird in der Anleitung zur
  \TeXLive"~\acro{CD} hingewiesen, die dort im Verzeichnis
  \url{texmf/doc/tldoc/} enthalten ist.} verfügbar ist.
Daher wird an dieser Stelle nur beschrieben, wie sie installiert
werden kann und wie die nicht enthaltenen Pakete nachinstalliert
werden können.
Sollten Sie eine andere \TeX"=Installation verwenden, wird die
Installation anders verlaufen. 
In diesem Fall müssen Sie leider ohne meine Hilfe auskommen.

Die \TeXLive"=8"=Installations"=\acro{CD} kann als so genannte
Imagedatei von der Adresse \url{ftp://www.tug.org/texlive/Images/}
heruntergeladen und auf \acro{CD} gebrannt werden. 
Zur Zeit ist sie in dem angegebenen Verzeichnis unter dem Dateinamen
\url{rc-texlive-inst.iso} abgelegt.
Wahrscheinlich wird sie nach Abschluss der Testphase umbenannt werden
und dann etwa \url{texlive8-}\meta{Datum}\url{-cd1.iso.bz2} heißen.
Die Dateiendung \url{.bz2} zeigt an, dass die Imagedatei gepackt ist.
Unter Unix kann sie mit \verb|bunzip2| oder \verb|bzip2 -d| entpackt
werden.
Unter Windows sollten Programme wie \verb|WinZIP| das Entpacken
übernehmen können.
Außerdem kann sie im Handel bei der Buchhandlung Lehmanns
(\url{http://www.lehmanns.de}) erworben werden.\footnote{Zum Zeitpunkt
  der Fertigstellung dieses Dokuments war die Version~8 der
  \TeXLive"=Distribution noch nicht erschienen. 
  Nach Auskunft der Entwickler steht die Fertigstellung kurz bevor.
  \emph{Weichen Sie bitte nicht auf die Version~7 aus, da diese mittlerweile
  stark verhaltet ist.}}

Lesen Sie zur Installation bitte auch die Dokumentation zu \TeXLive,
die auf der \TeXLive"=Installations"=\acro{CD} im Verzeichnis
\url{texmf/doc/tldoc/deutsch/}\footnote{Unter Windows wird als Trenner
  statt des \url{/} ein \texttt{\textbackslash} verwendet.
  Bei Pfadangaben, die für beide Betriebssysteme gelten, verwende ich
  einheitlich \url{/}.} enthalten ist.


\subsection{Installation unter Unix}

Im folgenden nehme ich an, dass das
\acro{CD}"=\acro{ROM}"=Laufwerk unter \url{/media/cdrom}
gemountet wird.
Wechseln Sie zunächst in das Basisverzeichnis der \acro{CD} und
rufen dort das Programm \verb|install-tl.sh| auf:\footnote{Die Zeichen
  vor dem \texttt{\#} sind der Prompt, die Sie natürlich nicht
  eintippen müssen.}
\begin{verbatim}[\small]
pc22:~ # cd /media/cdrom
pc22:/media/cdrom # ./install-tl.sh 
\end{verbatim}
Es erscheint der in Bild~\ref{fig:installation:install-tl.sh-1}
gezeigte Startbildschirm.
%
\begin{figure}%
  \centering
  \includegraphics{bilder/01b}%
  \caption{Startbildschirm des Installationsprogramms
    \texttt{install-tl.sh}}%
  \label{fig:installation:install-tl.sh-1}%
\end{figure}%
%
Wählen Sie den Punkt \emph{customizing installation scheme: <C>
  standard collections,} indem Sie die Taste "`c"' drücken.
Es erscheint das in Bild~\ref{fig:installation:install-tl.sh-2}
gezeigte Menü.
%
\begin{figure}%
  \centering
  \includegraphics{bilder/02b}%
  \caption{Auswahl der zusätzlich zu installierenden Pakete}%
  \label{fig:installation:install-tl.sh-2}%
\end{figure}%
%
Fügen Sie die \emph{LaTeX supplementary packages} hinzu, indem Sie
"`t"' drücken.
Kehren Sie mit "`r"' zum Hauptmenü (\emph{platform menu}) zurück.
Starten Sie nun die Installation durch Betätigen der Taste "`i"'.
Nach einiger Zeit kehrt das Programm automatisch zum Prompt zurück.

Nun müssen die \LaTeX"=Binärdateien in den Suchpfad aufgenommen
werden.
Soll dies systemweit geschehen, sollte der Pfad in der Datei
\url{/etc/profile} gesetzt werden.
Bei der SuSE"=8.2"=Distribution kann beispielsweise der kursiv
gedruckte Code in diese Datei eingefügt werden:
\begin{verbatim}[\small\makeescape\|\makebgroup\[\makeegroup\]]
#
# Make path more comfortable
#
if test -z "$PROFILEREAD" ; then
    PATH=/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin
    for dir in $HOME/bin/$CPU $HOME/bin ; do
        test -d $dir && PATH=$dir:$PATH
    done
    test "$UID" = 0 && PATH=/sbin:/usr/sbin:/usr/local/sbin:$PATH
    for dir in  /var/lib/dosemu \
                /usr/games \
                /opt/bin \
                /opt/gnome2/bin \
                /opt/gnome/bin \
                /opt/kde3/bin \
                /opt/kde2/bin \
                /opt/kde/bin \
                /usr/openwin/bin \
                /opt/cross/bin
    do
        test -d $dir && PATH=$PATH:$dir
    done
|itshape    for dir in  /usr/TeX/bin/i386-linux
    do
        test -d $dir && PATH=$dir:$PATH
    done
|upshape    unset dir
    export PATH
fi
\end{verbatim}
% $
Die \LaTeX"=Binärdateien sollten möglichst weit vorne im Pfad stehen,
damit sie vor vielleicht vorhandenen älteren Dateiversionen gefunden
werden.

Sorgen Sie dafür, dass die Programme wirklich im Suchpfad sind, bevor
Sie fortfahren. 
Dies kann beispielsweise durch die Eingabe von \verb|which latex|
überprüft werden.
Wenn eine Ausgabe wie
\begin{verbatim}[\small]
/usr/TeX/bin/i386-linux/latex
\end{verbatim}
erscheint, ist dies der Fall.
Bleibt die Ausgabe leer oder wird ein Pfad gezeigt, der nicht
\url{/usr/TeX} enthält, muss der Pfad noch gesetzt werden.

Installieren Sie nun das Paket \texttt{cm-super} nach,\footnote{Dies
  ist auch nötig, wenn Sie die Times als Schriftart verwenden.} indem
Sie folgende Befehlszeilen eintippen, die jeweils einige, hier nicht
gezeigte, Ausgaben erzeugen:
\begin{verbatim}[\small]
pc22:/media/cdrom # ./install-pkg.sh --package=cm-super
pc22:/media/cdrom # texhash
pc22:/media/cdrom # updmap --enable Map cm-super-t1.map
pc22:/media/cdrom # updmap --enable Map cm-super-t2a.map
pc22:/media/cdrom # updmap --enable Map cm-super-t2b.map
pc22:/media/cdrom # updmap --enable Map cm-super-t2c.map
pc22:/media/cdrom # updmap --enable Map cm-super-ts1.map
pc22:/media/cdrom # updmap --enable Map cm-super-x2.map
pc22:/media/cdrom # texhash
\end{verbatim}

Wechseln Sie nun in das lokale \emph{TEXMF}"=Verzeichnis der
\TeXLive"=Distribution:
\begin{verbatim}[\small]
pc22:/media/cdrom # cd /usr/TeX/texmf-local
pc22:/usr/TeX/texmf-local # 
\end{verbatim}

Einige Pakete sind in der \TeXLive"=Distribution nicht oder nur
veraltet enthalten.
Diese müssen noch nachinstalliert werden.
Tauschen Sie dazu die \TeXLive"=\acro{CD} gegen die
Installations"=\acro{CD} der \verb|bgteubner|"=Klasse.
Entpacken Sie anschließend alle Dateien im Verzeichnis \url{pakete/}
der \acro{CD}:
\begin{verbatim}[\small\makeescape\|\makebgroup\[\makeegroup\]]
pc22:/usr/TeX/texmf-local # unzip /media/cdrom/pakete/|meta[Dateiname]
\end{verbatim}
\feinschliff{\sloppypar\noindent}{}{}{}%
Zum Zeitpunkt der Fertigstellung dieser Installationsbeschreibung
waren folgende Dateien in dem Verzeichnis vorhanden: 
\url{bgteubner-1_08.zip},
\url{framed-0_8a.zip},
\url{ginpenc-1_0.zip},
\url{hfoldsty-1_00.zip},
\url{hhsubfigure-2_1_4a.zip},
\url{hhtensor-0_6.zip},
\url{layoutgrid-0_10.zip},
\url{numprint-1_10.zip},
\url{onlyamsmath-0_04.zip},
\url{psnfss.zip},
\url{slantsc-2_00.zip},
\url{subfloat-2_14.zip} und
\url{was.zip}.

Zum Schluss muss noch die Dateidatenbank aktualisiert werden, indem
Sie das Programm \verb|texhash| aufrufen.
Testen Sie Ihre Installation, indem Sie wie im
Abschnitt~\ref{sec:installation:test} verfahren.



\subsection{Installation unter Windows}

Starten Sie auf der \TeXLive"=Installations"=\acro{CD} das
Installationsprogramm \verb|autostart.exe|, falls dies nicht
automatisch beim Einlegen der \acro{CD} geschieht.
Es erscheint der Startbildschirm, wie in
Bild~\ref{fig:customizescheme} gezeigt.
%
\begin{figure}%
  \centering
  \includegraphics{bilder/bild4c}%
  \caption{Startbildschirm der Installation, Markierung des Schalters
    zum Modifizieren des Installationsschemas}%
  \label{fig:customizescheme}%
\end{figure}%
%
Wählten Sie als Installationsschema das \emph{"`Generic recommend
  TeXLive scheme"'}.
Markieren Sie zusätzlich die Schaltfläche \emph{I want to customize
  the selected scheme,} wie in Bild~\ref{fig:customizescheme}
gezeigt.
Es folgt die Abfrage, welche Pakete bzw.\ Paketgruppe installiert
werden soll. 
Wählen Sie hier zusätzlich zu den schon angekreuzten Paketen 
\url{texlive}--\url{tex_fontsextra}--\url{cm-super},
\url{texlive}--\url{tex_latexextra} sowie, falls auf Ihrem Rechner
Perl noch nicht installiert ist,
\url{texlive}--\url{tex_xemtex}--\url{perl} aus.

Führen Sie dann die Installation normal zu Ende

Bei der Installation werden einige benötigte Pakete nicht installiert,
oder sind nur in alten Versionen installiert, die von der
Installations"=\acro{CD} der Teubner"=Dokumentklasse
nachinstalliert werden müssen.
Die zu installierenden Pakete sind in gepackter Form im Verzeichnis
\url{pakete/} der \acro{CD} enthalten.
Um sie zu installieren, wechseln Sie in das lokale
\url{texmf}"=Verzeichnis der \TeXLive"=Installation 
(\url{C:\Programme\TeXLive\texmf-local}).
Entpacken Sie dort die gepackten Dateien von der \acro{CD}.
Die notwendige Verzeichnisstruktur wird dabei automatisch erzeugt.
Zum Zeitpunkt der Fertigstellung dieser Installationsbeschreibung
waren folgende Dateien in dem Verzeichnis vorhanden: 
\url{bgteubner-1_08.zip},
\url{framed-0_8a.zip},
\url{ginpenc-1_0.zip},
\url{hfoldsty-1_00.zip},
\url{hhsubfigure-2_1_4a.zip},
\url{hhtensor-0_6.zip},
\url{layoutgrid-0_10.zip},
\url{numprint-1_10.zip},
\url{onlyamsmath-0_04.zip},
\url{psnfss.zip},
\url{slantsc-2_00.zip},
\url{subfloat-2_14.zip} und
\url{was.zip}.

Falls Sie für Windows keinen entsprechenden Entpacker (wie z.\,B.\
WinZIP) besitzen, können Sie das entsprechende Programm
\url{unzip.exe} von der \TeXLive"=\acro{CD} (Verzeichnis
\url{support/}) verwenden.
Das Entpacken geht dann unter Windows in der Eingabeauf"|forderung
folgendermaßen unter der Annahme, dass das \acro{CD}"=Laufwerk
den Buchstaben \url{D:} besitzt: 
\begin{verbatim}[\small\makeescape\|\makebgroup\[\makeegroup\]]
C:\> cd C:\Proramme\TeXLive\texmf-local
C:\Programme\TeXLive\texmf-local> unzip D:\pakete\|meta[Dateiname]
\end{verbatim}

Anschließend muss die Dateidatenbank aktualisiert werden, damit die
neuen Pakete gefunden werden.
Dies geschieht durch den Aufruf
\emph{Programme -- TeXLive -- Maintenance -- Rebuild ls-R filenames
  databases}.


\subsection{Test der Installation}%
\label{sec:installation:test}%

Testen Sie zunächst, ob die Standard"=Postscript"=Type"~1"=Schriften
automatisch eingebunden werden.
Übersetzen Sie dazu das in Bild~\ref{fig:bspprogramm}
gezeigte Programm mit \pdfLaTeX\ und öffnen Sie es mit dem Acrobat
Reader.
%
\begin{figure}%
  \centering
  \newlength{\bildbreite}%
  \settowidth{\bildbreite}{%
    \small\ttfamily Hallo -textsf-Hallo- -texttt-Hallo-}%
  \begin{minipage}{\bildbreite}
\begin{verbatim}[\small]
\documentclass{article}
\usepackage{mathptmx}
\usepackage[scaled=0.92]{helvet}
\usepackage{courier}
\begin{document}
Hallo \textsf{Hallo} \texttt{Hallo}
\end{document}
\end{verbatim}
  \end{minipage}
  \caption{Beispielprogramm zum Testen, ob die Schriften eingebunden
    werden}%
  \label{fig:bspprogramm}%
\end{figure}%
%
Öffnen Sie nun den Menüpunkt \emph{File -- Document Properties --
  Fonts}. 
Wenn die Liste der verwendeten Schriften Bild~\ref{fig:times-ja}
entspricht, sind die Schriften eingebunden.
%
\begin{figure}%
  \hfil
  \subfigure[Schriften eingebunden]{%
    \includegraphics{bilder/times-ja2}%
    \label{fig:times-ja}%
  }%
  \hfil\hfil
  \subfigure[Schriften nicht eingebunden]{%
    \includegraphics{bilder/times-nein2}%
    \label{fig:times-nein}%
  }%
  \hfil
  \caption{Überprüfung anhand des Acrobat Readers, ob die Schriften
    eingebunden sind.}%
\end{figure}%
%
Gleicht die Ausgabe hingegen eher Bild~\ref{fig:times-nein}, sind die
Schriften nicht eingebunden.
Falls dies der Fall ist, müssen Sie \pdfLaTeX\ dazu bringen, die
Schriften doch einzubinden.
Dies geht mit dem Programm \verb|updmap|, indem Sie folgende
Befehlszeile eingeben:
\begin{verbatim}[\small]
updmap --setoption pdftexDownloadBase14 true
\end{verbatim}

Wenn die Autorenrichtlinien selbst fehlerfrei übersetzt werden können,
sollte die \LaTeX"=Installation vernünftig installiert sein.
Kopieren Sie, um dies zu testen, die Dateien im Verzeichnis
\url{doc/src} inklusive der Unterverzeichnisse in ein Verzeichnis auf
Ihrer Festplatte und übersetzen Sie die Datei mit folgender
Befehlsfolge:
\begingroup
\feinschliff{\def\Name{\meta{N}}}{\def\Name{\meta{Name}}}%
  {\def\Name{\meta{N}}}{\def\Name{\meta{N}}}%
\begin{verbatim}[\small\makeescape\|\makebgroup\[\makeegroup\]]
pdflatex |Name
pdflatex |Name
makeindex -c -g -s bgteuglo.ist -o |Name.glscmd -t |Name.glgcmd |Name.glocmd
bibtex |Name
pdflatex |Name
makeindex -c -g -s |Name.ist |Name
pdflatex |Name
\end{verbatim}
Dabei ist \Name\ der Dateiname der Version, die Sie testen
wollen:
\begin{description*}
\item [\texttt{bgteubner-17x24-times}:] Format $\np[mm]{170} \times
  \np[mm]{240}$ mit der Brotschriftart Times,
\item [\texttt{bgteubner-17x24-mathtime}:] Format $\np[mm]{170} \times
  \np[mm]{240}$ mit der Brotschriftart Times und MathTime"=Erweiterungen,
\item [\texttt{bgteubner-17x24-cm}:] Format $\np[mm]{170} \times
  \np[mm]{240}$ mit der Brotschriftart European Computer Modern,
\item [\texttt{bgteubner-a5-times}:] Format
  \acro{DIN"~A\,5} mit
  der Brotschriftart Times,\footnote{Die
    \acro{DIN"~A"~5}"=Versionen wurden nicht auf
    Umbrüche und zu große Bilder hin optimiert.}
\item [\texttt{bgteubner-a5-cm}:] Format
  \acro{DIN"~A\,5} mit der Brotschriftart European
  Computer Modern. 
\end{description*}
\endgroup

Übersetzen Sie möglichst mindestens eine Variante mit der Schrift
Times und eine Variante mit der European Computer Modern.
Achten Sie bei den Übersetzungsläufen auf Fehler folgender
Art:
\begin{verbatim}[\small]
! LaTeX Error: You have requested, on input line 206, version
               `2003/05/19' of package numprint,
               but only version
               `2003/02/27 v0.22 Print numbers'
               is available.
\end{verbatim}
Diese bedeuten, dass Sie nur eine veraltete Version des angegebenen
Pakets installiert haben.
Installieren Sie dann bitte eine Version des Pakets, die die
angegebene Anforderung erfüllt.
Fast alle verfügbaren Pakete sind auf den Servern des
\acro{CTAN}"=Netzwerkes abgelegt.
Einer dieser Server ist \url{http://www.dante.de} bzw.\
\url{ftp://ftp.dante.de}.
Von ihme sollten Sie eine aktuelle Version des Pakets herunterladen
und installieren.


\subsection{Test von MathTime}%
\label{sec:installation:mathtimetest}%

Falls Sie die MathTime"= und MathTimePlus"=Schriften haben, kann ein
Problem auftreten, dass darin begründet ist, dass bei \TeXLive\
defekte Dateien vorhanden sind.
Es kann passieren, dass die fetten Mathematikschriften nicht verfügbar
sind, obwohl sie installiert sind.
Herausfinden können Sie es mit folgender Datei:
\begin{verbatim}[\small]
\documentclass{article}
\usepackage[mtbold]{mathtime}
\begin{document}
$\alpha$\boldmath$\alpha$
\end{document}
\end{verbatim}
Falls Sie zwei gleiche $\alpha$ erhalten, ist Ihr mathtime nicht
korrekt installiert.
Sie können dann die aktuellen mathtime"=Dateien von CTAN
herunterladen, (vermutlich
\url{ftp:/ftp.dante.de/tex-archive/macros/latex/psnfssx/mathtime}) und
installieren.
Danach sollte ein normales und ein fettes alpha erscheinen.



\section{Installation von Hilfsprogrammen}%
\label{sec:installation-hilfe}%

Wie schon beschrieben, kann \pdfLaTeX\ folgende Dateiformate
einbinden:
\acro{JPG}, \acro{PNG} und \acro{PDF}.
Dabei handelt es sich bei den ersten beiden Formaten um reine
Pixel"=Formate, wobei \acro{JPG} nur für Fotos geeignet ist,
\acro{PNG} für alle Arten, also auch Strichzeichnungen und
Graphiken.
Für Bilder, die ursprünglich als Vektordaten vorliegen, sind beide
ungeeignet.

Das \acro{PDF}"=Format ist universell und kann sowohl Vektor- als
auch Pixeldaten enthalten.
Das unter \LaTeX"=Anwendern sehr verbreitete \acro{EPS}"=Format
kann von \pdfLaTeX\ leider nicht verarbeitet werden.
Allerdings besteht die Möglichkeit, \acro{EPS}"=Dateien mit dem
Programm \verb|epstopdf| in \acro{PDF} umzuwandeln.
Dieses Programm verwendet den Postscript"=Interpreter Ghostscript.
Beide Programme sind auf der \TeXLive"=\acro{CD} enthalten.
Unter Linux ist \verb|epstopdf| standardmäßig
installiert.
Ghostscript kann von der \acro{CD} nachinstalliert
werden.
Allerdings ist aus lizenzrechtlichen Gründen auf der \acro{CD}
nur eine ältere Version enthalten. 
Besser ist es, eine aktuelle Version aus dem Internet von
\url{http://www.sourceforge.net} herunterzuladen. 
Allerdings müssen aktuelle Versionen (ab Version 8.0) selbst übersetzt
werden.



% ===================================================================

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "bgteubner"
%%% End: 
