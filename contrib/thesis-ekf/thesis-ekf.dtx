
% \iffalse meta-comment
%
% Copyright (C) 2014- by Tibor Tomacs
%
% This file may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.2
% of this license or (at your option) any later version.
% The latest version of this license is in:
%
% http://www.latex-project.org/lppl.txt
%
% and version 1.2 or later is part of all distributions of LaTeX
% version 1999/12/01 or later.
%
% \fi
%
% \iffalse
%<*driver>
\ProvidesFile{thesis-ekf.dtx}
%</driver>
%<class>\NeedsTeXFormat{LaTeX2e}[1999/12/01]
%<class>\ProvidesClass{thesis-ekf}[2017/04/08 v2.1 Thesis class for Eszterhazy Karoly University (Eger, Hungary)]
%<class>
%<*driver>
\documentclass{ltxdoc}
\OnlyDescription
\usepackage[a4paper,pdfstartview=FitH,bookmarks=false,allcolors=teal,colorlinks]{hyperref}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english,magyar]{babel}
\frenchspacing
\usepackage{xcolor,paralist,etoolbox,textcomp}
\colorlet{example}{green!40!black}
\colorlet{code}{blue!40!black}
\AtBeginEnvironment{macro}{\color{code}}
\flushbottom
\makeatletter
\preto{\@verbatim}{\topsep=0pt \partopsep=0pt }
\makeatother

\begin{document}
	\DocInput{./thesis-ekf.dtx}
\end{document}
%</driver>
% \fi
%
% \CharacterTable
% {Upper-case \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%     Lower-case \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%     Digits \0\1\2\3\4\5\6\7\8\9
%     Exclamation         \!     Double quote    \"     Hash (number)   \#
%     Dollar              \$     Percent         \%     Ampersand       \&
%     Acute accent        \'     Left paren      \(     Right paren     \)
%     Asterisk            \*     Plus            \+     Comma           \,
%     Minus               \-     Point           \.     Solidus         \/
%     Colon               \:     Semicolon       \;     Less than       \<
%     Equals              \=     Greater than    \>     Question mark   \?
%     Commercial at       \@     Left bracket    \[     Backslash       \\
%     Right bracket       \]     Circumflex      \^     Underscore      \_
%     Grave accent        \`     Left brace      \{     Vertical bar    \|
%     Right brace         \}     Tilde           \~}
%
% \GetFileInfo{thesis-ekf.cls}
% \title{Thesis class for the\\ Eszterházy Károly University\\\textsf{thesis-ekf.cls}\\[2mm]{\normalsize Version 2.1\\2017/04/08\\}}
% \author{Tibor Tómács\\{\small\href{mailto:tomacs.tibor@uni-eszterhazy.hu}{\texttt{tomacs.tibor@uni-eszterhazy.hu}}}}
% \date{}
% \maketitle
%
% \selectlanguage{english}
% \begin{abstract}
% This is a class file for theses and dissertations at the Eszterházy Károly University (Eger, Hungary). It is based on the \texttt{report} class. The documentation is given in Hungarian only. You can download an English template from \href{http://tomacstibor.uni-eger.hu/tananyagok/thesis-ekf-templates.zip}{here}.
% \end{abstract}
%
% \selectlanguage{magyar}
% \section{Bevezető}
% A \texttt{thesis-ekf}\footnote{Az \texttt{ekf} az Eszterházy Károly Főiskola rövidítése, ugyanis ez a dokumentumosztály 2014-től létezik, amikor az intézmény még főiskola volt.} dokumentumosztály segítségével az Eszterházy Károly Egyetem szabályzatának megfelelő szakdolgozatokat lehet készíteni. A formai követelmények a következők:
%
% \medskip
% \begin{compactitem}
% \item A4-es lap- és 12\,pt betűméret;
% \item a margó a kötés oldalon 30\,mm, a többi 25\,mm;
% \item oldalszámozás a láblécben arab számozással;
% \item a fejezetcímek középre, a további szintek címei balra igazítva;
% \item a főszöveg antikva betűcsaláddal kiszedve;
% \item sorkizárt igazítás, másfeles sortávolság.
% \end{compactitem}
%
% \medskip\noindent
% A \texttt{thesis-ekf} ezeket a paramétereket automatikusan beállítja, továbbá a megfelelő címoldal elkészítését is elvégzi.
%
% A dokumentumosztály könnyen átparaméterezhető, így más egyetemek is használhatják (lásd \az{\ref{sec-param}}.~szakaszban).
%
% \section{A dokumentumosztály betöltése és opciói}
% A dokumentumosztály használata a szokásos módon történik:
%
% \begin{macro}{\documentclass}
% \hspace*{-8pt}{\small\oarg{opciók}|{thesis-ekf}|}\\
% \color{black}Ennek hatására a \texttt{kvoptions}, \texttt{etoolbox}, \texttt{setspace}, \texttt{hyperref} és \texttt{geometry} csomagok is betöltődnek. Az \meta{opciók} a következők lehetnek:
% \end{macro}
%
% \begin{macro}{twoside}\color{black}
% Ha a szakdolgozatot kétoldalasan szeretné kinyomtatni, akkor ezt az opciót alkalmazza! Ne használja egyoldalas nyomtatáshoz illetve elektronikus verzióhoz!
% \end{macro}
% \begin{macro}{colorlinks}\color{black}
% A linkek színes karakterekkel jelenjenek meg a PDF-ben! Ezt csak a szakdolgozat elektronikus verziójához használja, a nyomtatott verzióhoz nem kell!
% \end{macro}
%
% \section{Címoldal létrehozása}
% \begin{macro}{\maketitle}\color{black}
% Címoldal ezzel a paranccsal hozható létre. Ehhez előtte az adatokat a következő parancsokkal lehet megadni:
% \end{macro}
%
% \begin{macro}{\logo}
% \hspace*{-8pt}{\small\marg{kép vagy szöveg}}
% \color{black}Ezzel kell megadni annak az intézménynek a logóját, ahol a szakdolgozat készült. Pl.: |\logo{\includegraphics[width=9cm]{logo}}| (Ezelőtt be kell tölteni a \texttt{graphicx} csomagot!) Ha nem akar logót, akkor hagyja el ezt a parancsot.
% \end{macro}
%
% \begin{macro}{\institute}
% \hspace*{-8pt}{\small\marg{intézmény neve}}
% \color{black}Ezzel kell megadni annak az intézménynek a nevét, ahol a szakdolgozat készült.
% \end{macro}
%
% \begin{macro}{\title}
% \hspace*{-8pt}{\small\marg{szakdolgozat címe}}
% \color{black}Ezzel kell megadni a szakdolgozat címét.
% \end{macro}
%
% \begin{macro}{\authorcaption}
% \hspace*{-8pt}{\small\marg{szerző neve feletti felirat}}
% \color{black}Ezzel adhatjuk meg a szakdolgozat szerzőjének neve feletti feliratot. Ha nem adjuk meg, akkor a felirat \textbf{Author}, illetve magyar nyelv esetén \textbf{Készítette}.
% \end{macro}
%
% \begin{macro}{\author}
% \hspace*{-8pt}{\small|{|\meta{szerző neve}|\\ |\meta{szakja}|}|}
% \color{black}Ezzel kell megadni a szakdolgozat szerzőjének a nevét és szakját.
% \end{macro}
%
% \begin{macro}{\supervisorcaption}
% \hspace*{-8pt}{\small\marg{témavezető neve feletti felirat}}
% \color{black}Ezzel adhatjuk meg a szakdolgozat témavezetőjének neve feletti feliratot. Ha nem adjuk meg, akkor a felirat \textbf{Supervisor}, illetve magyar nyelv esetén \textbf{Témavezető}.
% \end{macro}
%
% \begin{macro}{\supervisor}
% \hspace*{-8pt}{\small|{|\meta{témavezető neve}|\\ |\meta{beosztása}|}|}
% \color{black}Ezzel kell megadni a szakdolgozat témavezetőjének a nevét és beosztását.
% \end{macro}
%
% \begin{macro}{\city}
% \hspace*{-8pt}{\small\marg{város}}
% \color{black}Ezzel kell megadni annak a városnak a nevét, ahol az intézmény található.
% \end{macro}
%
% \begin{macro}{\date}
% \hspace*{-8pt}{\small\marg{dolgozat leadásának éve}}
% \color{black}Ezzel kell megadni a szakdolgozat leadásának az évét. Ha nem adjuk meg, akkor az aktuális évszám fog megjelenni.
% \end{macro}
%
% \section{Példa a használatra}\label{pelda}
% Egy magyar- és egy angolnyelvű sablon a logókkal együtt letölthető \href{http://tomacstibor.uni-eger.hu/tananyagok/thesis-ekf-templates.zip}{innen}. Itt csak egy minimális példát mutatunk:
%
% \medskip
% {\color{example}
%\begin{verbatim}
%\documentclass[colorlinks]{thesis-ekf}
%\usepackage[T1]{fontenc}
%\usepackage[utf8]{inputenc}
%\PassOptionsToPackage{defaults=hu-min}{magyar.ldf}
%\usepackage[magyar]{babel}
%\usepackage{graphicx}
%
%\begin{document}
%\logo{\includegraphics[width=9cm]{logo}}
%\institute{Eszterházy Károly Egyetem\\ Matematikai és Informatikai Intézet}
%\title{A valószínűségszámítás mértékelméleti alapjai}
%\author{Szabó János\\ matematika BSc}
%\supervisor{Dr. Nagy János\\ egyetemi docens}
%\city{Eger}
%\date{2017}
%\maketitle
%\tableofcontents
%
%\chapter{Fejezet címe}
%\section{Szakasz címe}
%
%\begin{thebibliography}{1}
%\bibitem{cimke} \textsc{Szerző}: Cím, Kiadó, Hely, évszám.
%\end{thebibliography}
%\end{document}
%\end{verbatim}}
%
% \section{A dokumentumosztály átparaméterezése}\label{sec-param}
% A \texttt{thesis-ekf} dokumentumosztály könnyen átparaméterezhető, így más egyetemek is használhatják.
% \subsection*{A dokumentumosztály átparaméterező opciói}
% \begin{macro}{logodown}\color{black}
% Alapbeállítás esetén a logó az intézmény neve felett van. Ezzel a logó az intézmény neve alá kerül. Ez akkor célszerű, ha a logó pajzs alakú.
% \end{macro}
%
% \begin{macro}{centeredchapter=false}\color{black}
% Ezzel a fejezetcímek nem középre, hanem balra zártan lesznek kiszedve.
% \end{macro}
%
% \begin{macro}{fontsize=}
% \hspace*{-8pt}{\small\meta{betűméret}}
% \color{black}A \meta{betűméret} lehetséges értékei |10pt|, |11pt| és |12pt|. Ez adja meg az alapbetűméretet. Például: |fontsize=11pt|
% \end{macro}
%
% \begin{macro}{institutesep=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black} Az intézmény neve és a logó közötti távolság, ha a \texttt{logodown} opció be van kapcsolva. Például |institutesep=5mm|
% \end{macro}
%
% \begin{macro}{logosep=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black}Az intézmény neve és a logó közötti távolság, ha a \texttt{logodown} opció nincs bekapcsolva. Például |logosep=5mm|
% \end{macro}
%
% \begin{macro}{titlesep=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black}A cím alatti térköz mérete. Ha például azt szeretnénk, hogy a cím feletti és alatti térközök aránya $1:2$ legyen, akkor a következőt kell beírni: |titlesep=\stretch{2}|.\footnote{Azok az opciók, melyekben parancs is van, csak a \texttt{\textbackslash setkeys\{ekf\}\{$\langle${\it opciók}$\rangle$\}} parancsba írhatók! Ilyenek még a betűtípusra vonatkozó opciók is.} Fix méret is beírható, például |titlesep=7cm|
% \end{macro}
%
% \begin{macro}{captionsep=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black}A szerző neve és a felette lévő felirat távolsága. Például |captionsep=2mm|
% \end{macro}
%
% \begin{macro}{authorsep=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black}Az évszám távolsága a szerző szakjától. Például |authorsep=20mm|
% \end{macro}
%
% \begin{macro}{xmargin=}
% \hspace*{-8pt}{\small\meta{méret}}
% \color{black}Ezzel a szerzőnél és a témavezetőnél egy extra margóméret adható meg, azaz a normál margó ennyivel nő. Például |xmargin=5mm|
% \end{macro}
%
% \begin{macro}{institutefont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}Az intézmény nevének betűtípusa. Pl. |institutefont=\large\scshape|
% \end{macro}
%
% \begin{macro}{logofont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}Ha a logó helyére szöveget írunk, akkor ez lesz a betűtípusa. Például |logofont=\large\scshape|
% \end{macro}
%
% \begin{macro}{titlefont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}A dolgozat címének betűtípusa. Például |titlefont=\Huge\sffamily|
% \end{macro}
%
% \begin{macro}{captionfont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}A szerző és témavezető nevei feletti feliratok betűtípusa. Például\\ |captionfont=\large\bfseries|
% \end{macro}
%
% \begin{macro}{authorfont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}A szerző nevének és szakjának, illetve a témavezető nevének és beosztásának betűtípusa. Például |authorfont=\large\normalfont|
% \end{macro}
%
% \begin{macro}{cityfont=}
% \hspace*{-8pt}{\small\meta{betűtípus}}
% \color{black}A város és az évszám betűtípusa. Például |cityfont=\large\scshape|
% \end{macro}
%
% \subsection*{Parancsok}
% \begin{macro}{\setkeys}
% \hspace*{-8pt}{\small|{ekf}|\marg{opciók}}
% \color{black}A \texttt{thesis-ekf} opciói, a |fontsize| kivételével, ezzel a paranccsal is beállíthatók. Például |\setkeys{ekf}{logodown,centeredchapter=false}|
%
% \noindent Ha a |\setkeys| parancsot a konfigurációs fájlba írjuk (lásd később), akkor abba a |fontsize| opció is beírható. Azok az opciók, melyekben parancs van, mint például a betűtípusra vonatkozók, csak a |\setkeys| parancsba írhatók!
% \end{macro}
%
% \begin{macro}{\hypersetup}
% \hspace*{-8pt}{\small\marg{hyperref opciók}}
% \color{black}A \texttt{hyperref} csomag opciói ezzel állíthatók be. Például, ha a linkek színét pirosra akarjuk állítani: |\hypersetup{allcolors=red}|
% \end{macro}
%
% \begin{macro}{\geometry}
% \hspace*{-8pt}{\small\marg{geometry opciók}}
% \color{black}A \texttt{geometry} csomag opciói ezzel állíthatók be. Például, ha B5 lapméretet szeretnénk, 20\,mm margókkal, kivéve a belső margót, amely 25\,mm:\\ |\geometry{b5paper,top=20mm,bottom=20mm,inner=25mm,outer=20mm}|
% \end{macro}
%
% \begin{macro}{\ekf@sep}\color{black}
% A város és az évszám közötti elválasztás. Ha például a város alá akarjuk tenni az évszámot: |\def\ekf@sep{\\}|
% \end{macro}
%
% \begin{macro}{\singlespacing}\color{black}
% Alapbeállítás esetén a sortávolság másfeles. A \texttt{setspace} csomag |\singlespacing| parancsával visszaállítható a normál méretű sortávolság.
% \end{macro}
%
% \subsection*{Konfigurációs fájl}
% \begin{macro}{thesis-ekf.cfg}\color{black}
% Az átparaméterező opciókat és parancsokat célszerű egy \texttt{thesis-ekf.cfg} fájlba írni, amit a \texttt{tex} forrásfájl mellé kell tenni. A dokumentumosztály betöltésekor ez a fájl automatikusan betöltődik. Ügyeljen arra, hogy a konfigurációs fájlban előforduló ékezetes betűket repülő ékezettel kell beírni!
% \end{macro}
%
% \begin{macro}{\AtEndOfClass}
% \hspace*{-8pt}{\small\marg{parancsok}}
% \color{black}A konfigurációs fájlba minden parancsot, a |\setkeys| kivételével, ebbe a parancsba kell írni. Például\\ |\AtEndOfClass{\hypersetup{allcolors=red}\authorcaption{\|\textquotesingle|{I}rta}}|
% \end{macro}
%
% \subsection*{Példa az átparaméterezésre}
% A következőket írjuk be a \texttt{thesis-ekf.cfg} fájlba, majd tegyük \aref{pelda}.~szakaszban található \texttt{tex} forrásfájl mellé.
%
% \medskip
%{\color{example}\small
%\begin{verbatim}
%\setkeys{ekf}{
%  fontsize=11pt,
%  logodown,
%  centeredchapter=false,
%  institutesep=5mm,
%  titlesep=\stretch{2},
%  authorsep=15mm,
%  xmargin=5mm,
%  captionsep=2mm,
%  institutefont=\large\rmfamily,
%  titlefont=\Huge\sffamily,
%  authorfont=\large\rmfamily,
%  captionfont=\large\rmfamily\bfseries,
%  cityfont=\large\scshape
%}
%\AtEndOfClass{
%  \hypersetup{allcolors=red}
%  \geometry{b5paper,top=20mm,bottom=20mm,inner=25mm,outer=20mm}
%  \singlespacing
%  \def\ekf@sep{\\}
%\end{verbatim}
%\noindent
%|  \authorcaption{\|\textquotesingle|{I}rta}|\\
%|}|}
%
% \StopEventually{}
%    \begin{macrocode}
\RequirePackage{kvoptions,etoolbox,setspace}
\SetupKeyvalOptions{family=ekf,prefix=ekf@}
\DeclareVoidOption{twoside}{\PassOptionsToClass{twoside}{report}}
\DeclareVoidOption{colorlinks}{\PassOptionsToPackage{colorlinks}{hyperref}}
\DeclareBoolOption{logodown}
\DeclareBoolOption[true]{centeredchapter}
\DeclareStringOption[12pt]{fontsize}
\DeclareStringOption[10mm]{institutesep}
\DeclareStringOption[0mm]{logosep}
\DeclareStringOption[\stretch{1.5}]{titlesep}
\DeclareStringOption[15mm]{authorsep}
\DeclareStringOption[10mm]{xmargin}
\DeclareStringOption[1mm]{captionsep}
\DeclareStringOption[\large\normalfont\scshape]{institutefont}
\DeclareStringOption[\large\normalfont\scshape]{logofont}
\DeclareStringOption[\Huge\normalfont\sffamily\bfseries]{titlefont}
\DeclareStringOption[\large\normalfont]{authorfont}
\DeclareStringOption[\large\normalfont\bfseries]{captionfont}
\DeclareStringOption[\large\normalfont\scshape]{cityfont}
\ProcessKeyvalOptions{ekf}
\InputIfFileExists{thesis-ekf.cfg}{}{}

\def\ekf@ten{10pt}
\def\ekf@eleven{11pt}
\def\ekf@twelve{12pt}

\ifx\ekf@fontsize\ekf@ten\else
\ifx\ekf@fontsize\ekf@eleven\else
\ifx\ekf@fontsize\ekf@twelve\else
\ClassWarning{thesis-ekf}{Unused option: fontsize=\ekf@fontsize. Use fontsize=10pt, fontsize=11pt or fontsize=12pt!}
\def\ekf@fontsize{12pt}
\fi\fi\fi

\PassOptionsToClass{\ekf@fontsize}{report}
\LoadClass{report}

\RequirePackage[unicode,linktocpage,allcolors=blue,pdfstartview=FitH,bookmarksnumbered,pdfborder={0 0 0}]{hyperref}
\RequirePackage[a4paper,top=25mm,bottom=25mm,inner=30mm,outer=25mm]{geometry}

\onehalfspacing
\flushbottom
\widowpenalty=10000
\clubpenalty=10000

\def\ekf@chapternumber{%
    \@ifundefined{l@magyar}
       {\@chapapp\space \thechapter}
       {\iflanguage{magyar}
          {\magyar@huordinal@chapterheaddot \@chapapp}
          {\@chapapp\space \thechapter}}}

\def\ekf@centeredchapter{%
    \def\@makechapterhead##1{%
      \vspace*{50\p@}%
      {\parindent \z@ \raggedright \normalfont
        \ifnum \c@secnumdepth >\m@ne
            {\centering\huge\bfseries \ekf@chapternumber
            \par\nobreak}
            \vskip 20\p@
        \fi
        \interlinepenalty\@M
        {\centering\Huge \bfseries ##1\par\nobreak}
        \vskip 40\p@
      }}
    \def\@makeschapterhead##1{%
      \vspace*{50\p@}%
      {\parindent \z@ \raggedright
        \normalfont
        \interlinepenalty\@M
        {\centering\Huge \bfseries  ##1\par\nobreak}
        \vskip 40\p@
      }}}

\AfterEndPreamble{

\ifekf@centeredchapter
    \ekf@centeredchapter
    \let\original@selectlanguage\selectlanguage
    \def\selectlanguage#1{\original@selectlanguage{#1}\ekf@centeredchapter}\fi

\def\@dottedtocline#1#2#3#4#5{%
  \ifnum #1>\c@tocdepth \else
    \vskip \z@ \@plus.2\p@
    {\leftskip #2\relax \rightskip \@tocrmarg \parfillskip -\rightskip
     \parindent #2\relax\@afterindenttrue
     \interlinepenalty\@M
     \leavevmode
     \@tempdima #3\relax
     \advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
     {#4}\nobreak
     \leaders\hbox{$\m@th
        \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
        mu$}\hfill
     \nobreak
     \hb@xt@\@pnumwidth{\hfil\normalfont \normalcolor #5}%
     \par}%
  \fi}

\renewcommand*\l@chapter[2]{%
  \ifnum \c@tocdepth >\z@
    \addpenalty\@secpenalty
    \addvspace{1.0em \@plus\p@}%
    \setlength\@tempdima{1.8em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \bfseries
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\hfil \nobreak\hb@xt@\@pnumwidth{\hss #2}\par
    \endgroup
  \fi}
\renewcommand*\l@section{\@dottedtocline{1}{1.8em}{2.5em}}
\renewcommand*\l@subsection{\@dottedtocline{2}{4.3em}{3.2em}}

\if@nochanged@authorcaption@%
    \@ifundefined{l@magyar}{}{%
    \iflanguage{magyar}{\gdef\ekf@authorcaption{K\'{e}sz\'{\i}tette}}{}}\fi

\if@nochanged@supervisorcaption@%
    \@ifundefined{l@magyar}{}{%
    \iflanguage{magyar}{\gdef\ekf@supervisorcaption{T\'{e}mavezet\H{o}}}{}}\fi

}

\def\logo#1{\gdef\ekf@logo{#1}}
\logo{}
\def\ekf@logo@{\ifx\ekf@logo\@empty%
    \ClassWarning{thesis-ekf}{There isn't logo!}%
    \else\ekf@logo\fi}

\def\institute#1{\gdef\ekf@institute{#1}}
\institute{}
\def\ekf@institute@{\ifx\ekf@institute\@empty%
    \ClassWarning{thesis-ekf}{There isn't institute!}%
    \else\ekf@institute\fi}

\def\title#1{\gdef\ekf@title{#1}}
\title{}
\def\ekf@title@{\ifx\ekf@title\@empty
    \ClassWarning{thesis-ekf}{There isn't title!}~%
    \else\ekf@title\fi}

\def\author#1{\gdef\ekf@author{#1}}
\author{}
\def\ekf@author@{\ifx\ekf@author\@empty
    \ClassWarning{thesis-ekf}{There isn't author!}~%
    \else\ekf@author\fi}

\newif\if@nochanged@authorcaption@\@nochanged@authorcaption@true
\def\authorcaption#1{\@nochanged@authorcaption@false\gdef\ekf@authorcaption{#1}}
\def\ekf@authorcaption{Author}
\def\ekf@authorcaption@{\ifx\ekf@author\@empty~%
    \else
    \ifx\ekf@authorcaption\@empty
    \ClassWarning{thesis-ekf}{There isn't authorcaption!}~%
    \else\ekf@authorcaption\fi\fi}

\def\supervisor#1{\gdef\ekf@supervisor{#1}}
\supervisor{}
\def\ekf@supervisor@{\ifx\ekf@supervisor\@empty
    \ClassWarning{thesis-ekf}{There isn't supervisor!}~%
    \else\ekf@supervisor\fi}

\newif\if@nochanged@supervisorcaption@\@nochanged@supervisorcaption@true
\def\supervisorcaption#1{\@nochanged@supervisorcaption@false\gdef\ekf@supervisorcaption{#1}}
\def\ekf@supervisorcaption{Supervisor}
\def\ekf@supervisorcaption@{\ifx\ekf@supervisor\@empty~%
    \else
    \ifx\ekf@supervisorcaption\@empty
    \ClassWarning{thesis-ekf}{There isn't supervisorcaption!}~%
    \else\ekf@supervisorcaption\fi\fi}

\def\city#1{\gdef\ekf@city{#1}}
\city{}
\def\ekf@city@{\ekf@city\ifx\ekf@city\@empty%
    \ClassWarning{thesis-ekf}{There isn't city!}\fi}

\def\date#1{\gdef\ekf@date{#1}}
\date{\number\year}
\def\ekf@date@{\ekf@date\ifx\ekf@date\@empty%
    \ClassWarning{thesis-ekf}{There isn't date!}\fi}

\def\ekf@sep{,~}
\def\ekf@sep@{\ifx\ekf@city\@empty\else\ifx\ekf@date\@empty\else\ekf@sep\fi\fi}

\def\maketitle{
\thispagestyle{empty}
{\centering
\ifekf@logodown
{\ekf@institutefont\ekf@institute@\ifx\ekf@institute\@empty\else\\
\vspace{\ekf@institutesep}\fi}
{\ekf@logofont\ekf@logo@\ifx\ekf@logo\@empty~\\\else\\\fi}
\else
{\ekf@logofont\ekf@logo@\ifx\ekf@logo\@empty\else\\\vspace{\ekf@logosep}\fi}
{\ekf@institutefont\ekf@institute@\ifx\ekf@institute\@empty~\\\else\\\fi}
\fi
\vfill{\ekf@titlefont\ekf@title@\\}\vspace{\ekf@titlesep}
{\ekf@authorfont
\begin{tabular}[t]{@{\hspace{\ekf@xmargin}}l@{}}
{\ekf@captionfont\ekf@authorcaption@}\\[\ekf@captionsep]
\ekf@author@
\end{tabular}
\hfill
\begin{tabular}[t]{@{}l@{\hspace{\ekf@xmargin}}}
{\ekf@captionfont\ekf@supervisorcaption@}\\[\ekf@captionsep]
\ekf@supervisor@
\end{tabular}}
\par\vspace{\ekf@authorsep}
{\ekf@cityfont\ekf@city@\ekf@sep@\ekf@date@\par}
}
\newpage
\if@twoside\thispagestyle{empty}\hbox{}\newpage\fi}

%    \end{macrocode}
% \Finale
\endinput